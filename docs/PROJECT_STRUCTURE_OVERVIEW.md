# AI ê´€ë¦¬í˜• ê´‘ê³  ìš´ì˜ ì‹œìŠ¤í…œ - í”„ë¡œì íŠ¸ ì „ì²´ êµ¬ì¡° ë° ê¸°ëŠ¥ ê°œìš”

> **ë¬¸ì„œ ëª©ì **: ì´ ë¬¸ì„œëŠ” í”„ë¡œì íŠ¸ë¥¼ ì²˜ìŒ ì¸ìˆ˜ë°›ëŠ” ê°œë°œìžê°€ ì „ì²´ ì‹œìŠ¤í…œì˜ êµ¬ì¡°, ì±…ìž„ ë¶„ë¦¬, ë°ì´í„° íë¦„ì„ ë¹ ë¥´ê²Œ ì´í•´í•  ìˆ˜ ìžˆë„ë¡ ìž‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.

---

## 1. í”„ë¡œì íŠ¸ ì „ì²´ ê°œìš”

### 1.1 í”„ë¡œì íŠ¸ ëª©ì 

**AI ê´€ë¦¬í˜• ê´‘ê³  ìš´ì˜ ì‹œìŠ¤í…œ**ì€ ìžì—°ì–´ ìž…ë ¥ë§Œìœ¼ë¡œ ê´‘ê³  ìº íŽ˜ì¸ì„ ìƒì„±í•˜ê³ , LLMì´ ì‹¤í–‰ ê°€ëŠ¥í•œ ê¸°íšì„œë¥¼ ìžë™ ìƒì„±í•˜ë©°, í”Œëž«í¼ì´ ëª¨ì§‘/ì„ ì •/ì§‘í–‰/ì¦ë¹™/ë¦¬í¬íŠ¸ê¹Œì§€ ì „ ê³¼ì •ì„ ìžë™í™”í•˜ì—¬ ìš´ì˜í•˜ëŠ” ì‹œìŠ¤í…œìž…ë‹ˆë‹¤.

**í•µì‹¬ ê°€ì¹˜ ì œì•ˆ**:
- ê´‘ê³  ì „ë¬¸ ì§€ì‹ ì—†ì´ë„ ìžì—°ì–´ë¡œ ìº íŽ˜ì¸ ìš”ì²­ ê°€ëŠ¥
- AIê°€ ì „ë¬¸ì ì¸ ê´‘ê³  ê¸°íšì„œ ìžë™ ìƒì„±
- ê´‘ê³ ì£¼-ì¸í”Œë£¨ì–¸ì„œ ê°„ ì§ì ‘ ì†Œí†µ ì°¨ë‹¨ (í”Œëž«í¼ ì¤‘ì‹¬ ìš´ì˜)
- ì—­í•  ê¸°ë°˜ ì ‘ê·¼ ì œì–´ (ê´‘ê³ ì£¼/ì¸í”Œë£¨ì–¸ì„œ/ìš´ì˜ìž)

### 1.2 ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ê°œìš”

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Frontend Layer (Next.js App Router)       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  Advertiser  â”‚  â”‚  Influencer  â”‚  â”‚    Admin     â”‚      â”‚
â”‚  â”‚     UI       â”‚  â”‚     UI       â”‚  â”‚     UI       â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”‚ HTTP/API Calls
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              API Layer (Next.js API Routes)                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Auth Middleware â†’ Role-based Access Control         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Campaign â”‚  â”‚Applicationâ”‚ â”‚Submissionâ”‚  â”‚  Storage â”‚   â”‚
â”‚  â”‚   API    â”‚  â”‚    API    â”‚ â”‚   API    â”‚  â”‚   API    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                   â”‚                   â”‚
        â–¼                   â–¼                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Firestore  â”‚   â”‚   Firebase   â”‚   â”‚  LLM API     â”‚
â”‚   (Database) â”‚   â”‚  Storage     â”‚   â”‚ (OpenAI)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                   â”‚
        â”‚                   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Firebase Auth       â”‚
        â”‚  (Email/Password)    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Background Jobs      â”‚
        â”‚  (Vercel Cron)        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.3 ë ˆì´ì–´ë³„ ì—­í•  ìš”ì•½

#### Frontend Layer (Next.js App Router)
- **ì±…ìž„**: ì‚¬ìš©ìž ì¸í„°íŽ˜ì´ìŠ¤ ë Œë”ë§, í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ ìƒíƒœ ê´€ë¦¬
- **ê¸°ìˆ **: React 18, Next.js 14 App Router, TypeScript, Tailwind CSS
- **íŠ¹ì§•**: ì—­í• ë³„ Route Groupsë¡œ UI ë¶„ë¦¬, Server/Client Components í˜¼ìš©

#### API Layer (Next.js Route Handlers)
- **ì±…ìž„**: ì¸ì¦/ì¸ê°€, ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì²˜ë¦¬, ì™¸ë¶€ ì„œë¹„ìŠ¤ ì—°ë™
- **ê¸°ìˆ **: Next.js API Routes, Firebase Admin SDK
- **íŠ¹ì§•**: ë¯¸ë“¤ì›¨ì–´ ê¸°ë°˜ ì¸ì¦, ì—­í•  ê¸°ë°˜ ì ‘ê·¼ ì œì–´, í†µì¼ëœ ì—ëŸ¬ ì‘ë‹µ

#### Data Layer (Firebase Services)
- **Firestore**: êµ¬ì¡°í™”ëœ ë°ì´í„° ì €ìž¥ (campaigns, users, applications, submissions, events)
- **Firebase Storage**: ì¦ë¹™ íŒŒì¼ ì—…ë¡œë“œ (Signed URL ë°©ì‹)
- **Firebase Auth**: ì‚¬ìš©ìž ì¸ì¦ ë° ì—­í•  ê´€ë¦¬

#### AI/External Services
- **OpenAI GPT-4**: ìžì—°ì–´ â†’ êµ¬ì¡°í™”ëœ ìº íŽ˜ì¸ ìŠ¤íŽ™ ë³€í™˜
- **Vercel Cron**: ìŠ¤ì¼€ì¤„ë§ëœ ë°±ê·¸ë¼ìš´ë“œ ìž‘ì—… (ë¦¬ë§ˆì¸ë”, ë¦¬í¬íŠ¸ ìƒì„±, ìƒíƒœ ì „í™˜)

---

## 2. í´ë” ë‹¨ìœ„ êµ¬ì¡°í™”

### 2.1 ë£¨íŠ¸ ë””ë ‰í† ë¦¬

```
ads/
â”œâ”€â”€ .env.local              # í™˜ê²½ë³€ìˆ˜ (ë¡œì»¬ ê°œë°œìš©, Git ë¬´ì‹œ)
â”œâ”€â”€ .gitignore              # Git ë¬´ì‹œ íŒŒì¼ ëª©ë¡
â”œâ”€â”€ package.json            # í”„ë¡œì íŠ¸ ì˜ì¡´ì„± ë° ìŠ¤í¬ë¦½íŠ¸
â”œâ”€â”€ tsconfig.json           # TypeScript ì„¤ì •
â”œâ”€â”€ next.config.js          # Next.js ì„¤ì • (ì´ë¯¸ì§€ ë„ë©”ì¸ ë“±)
â”œâ”€â”€ tailwind.config.ts      # Tailwind CSS ì„¤ì •
â”œâ”€â”€ firebase.json           # Firebase CLI ì„¤ì •
â”œâ”€â”€ firestore.rules         # Firestore ë³´ì•ˆ ê·œì¹™
â”œâ”€â”€ firestore.indexes.json  # Firestore ì¸ë±ìŠ¤ ì •ì˜
â”œâ”€â”€ vercel.json             # Vercel ë°°í¬ ì„¤ì • (Cron Jobs í¬í•¨)
â”œâ”€â”€ public/                 # ì •ì  íŒŒì¼ (ì´ë¯¸ì§€ ë“±)
â”œâ”€â”€ src/                    # ì†ŒìŠ¤ ì½”ë“œ
â”œâ”€â”€ docs/                   # í”„ë¡œì íŠ¸ ë¬¸ì„œ
â””â”€â”€ README.md               # í”„ë¡œì íŠ¸ ê°œìš” ë° ì‹œìž‘ ê°€ì´ë“œ
```

**ì£¼ìš” ì„¤ì • íŒŒì¼ ì„¤ëª…**:
- `vercel.json`: Vercel Cron Jobs ìŠ¤ì¼€ì¤„ ì •ì˜ (ë§¤ì¼ ë¦¬ë§ˆì¸ë”, ë§¤ì‹œê°„ ìƒíƒœ ì „í™˜ ë“±)
- `firestore.rules`: í˜„ìž¬ ëª¨ë“  ì ‘ê·¼ ì°¨ë‹¨ (ë³´ì•ˆ ê·œì¹™ ë¯¸êµ¬í˜„ ìƒíƒœ - ì£¼ì˜ í•„ìš”)
- `next.config.js`: Firebase Storage ì´ë¯¸ì§€ ë„ë©”ì¸ í—ˆìš© ì„¤ì •

---

### 2.2 `/src` - ì†ŒìŠ¤ ì½”ë“œ ë£¨íŠ¸

#### `/src/app` - Next.js App Router (íŽ˜ì´ì§€ ë° API)

**ì±…ìž„**: 
- ì‚¬ìš©ìž ì¸í„°íŽ˜ì´ìŠ¤ íŽ˜ì´ì§€ ë Œë”ë§
- API ì—”ë“œí¬ì¸íŠ¸ ì œê³µ
- ë¼ìš°íŒ… ë° ë ˆì´ì•„ì›ƒ ê´€ë¦¬

**êµ¬ì¡°**:
```
src/app/
â”œâ”€â”€ layout.tsx              # ë£¨íŠ¸ ë ˆì´ì•„ì›ƒ (ì „ì—­ ë©”íƒ€ë°ì´í„°, í°íŠ¸ ì„¤ì •)
â”œâ”€â”€ page.tsx                # ëžœë”© íŽ˜ì´ì§€ (ë¡œê·¸ì¸ ì²´í¬ í›„ ë¦¬ë‹¤ì´ë ‰íŠ¸)
â”œâ”€â”€ globals.css             # ì „ì—­ ìŠ¤íƒ€ì¼ (Tailwind CSS, CSS ë³€ìˆ˜)
â”‚
â”œâ”€â”€ (auth)/                 # ì¸ì¦ ê´€ë ¨ íŽ˜ì´ì§€ (Route Group)
â”‚   â”œâ”€â”€ login/page.tsx      # ë¡œê·¸ì¸ íŽ˜ì´ì§€
â”‚   â””â”€â”€ signup/page.tsx     # íšŒì›ê°€ìž… íŽ˜ì´ì§€
â”‚
â”œâ”€â”€ (advertiser)/           # ê´‘ê³ ì£¼ ì „ìš© íŽ˜ì´ì§€ (Route Group)
â”‚   â”œâ”€â”€ layout.tsx          # ê´‘ê³ ì£¼ ë ˆì´ì•„ì›ƒ (ë„¤ë¹„ê²Œì´ì…˜ í¬í•¨)
â”‚   â””â”€â”€ campaigns/
â”‚       â”œâ”€â”€ new/page.tsx    # ìƒˆ ìº íŽ˜ì¸ ìƒì„± (ìžì—°ì–´ ìž…ë ¥)
â”‚       â””â”€â”€ [id]/
â”‚           â””â”€â”€ clarify/    # í™•ì¸ ì§ˆë¬¸ ë‹µë³€ (ë¹ˆ í´ë” - ë¯¸êµ¬í˜„)
â”‚
â”œâ”€â”€ (influencer)/           # ì¸í”Œë£¨ì–¸ì„œ ì „ìš© íŽ˜ì´ì§€ (Route Group)
â”‚   â””â”€â”€ layout.tsx          # ì¸í”Œë£¨ì–¸ì„œ ë ˆì´ì•„ì›ƒ
â”‚
â”œâ”€â”€ admin/                  # ìš´ì˜ìž íŽ˜ì´ì§€ (Route Group ì•„ë‹˜)
â”‚   â”œâ”€â”€ layout.tsx          # ìš´ì˜ìž ë ˆì´ì•„ì›ƒ
â”‚   â”œâ”€â”€ dashboard/page.tsx  # ì „ì²´ ìº íŽ˜ì¸ ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œ
â”‚   â””â”€â”€ campaigns/
â”‚       â””â”€â”€ [id]/page.tsx   # ìº íŽ˜ì¸ ìƒì„¸ ê´€ë¦¬
â”‚
â”œâ”€â”€ campaigns/              # ê³µí†µ ìº íŽ˜ì¸ íŽ˜ì´ì§€
â”‚   â”œâ”€â”€ layout.tsx          # ìº íŽ˜ì¸ ê³µí†µ ë ˆì´ì•„ì›ƒ
â”‚   â”œâ”€â”€ page.tsx            # ìº íŽ˜ì¸ ë¦¬ìŠ¤íŠ¸ (ì—­í• ë³„ ë‹¤ë¥¸ ë·°)
â”‚   â””â”€â”€ [id]/
â”‚       â”œâ”€â”€ page.tsx        # ìº íŽ˜ì¸ ìƒì„¸ ë³´ê¸°
â”‚       â””â”€â”€ review/page.tsx # ì œì•ˆì„œ ê²€í†  íŽ˜ì´ì§€
â”‚
â””â”€â”€ api/                    # API Route Handlers
    â”œâ”€â”€ auth/
    â”‚   â”œâ”€â”€ me/route.ts     # í˜„ìž¬ ì‚¬ìš©ìž ì •ë³´ ì¡°íšŒ
    â”‚   â””â”€â”€ signup/route.ts # íšŒì›ê°€ìž… ì²˜ë¦¬
    â”‚
    â”œâ”€â”€ campaigns/
    â”‚   â”œâ”€â”€ route.ts        # GET: ìº íŽ˜ì¸ ë¦¬ìŠ¤íŠ¸, POST: ìº íŽ˜ì¸ ìƒì„±
    â”‚   â”œâ”€â”€ generate/route.ts # POST: LLMìœ¼ë¡œ ìº íŽ˜ì¸ ìƒì„±
    â”‚   â”œâ”€â”€ open/route.ts   # GET: ì˜¤í”ˆ ìº íŽ˜ì¸ ë¦¬ìŠ¤íŠ¸ (ì¸í”Œë£¨ì–¸ì„œìš©)
    â”‚   â””â”€â”€ [id]/
    â”‚       â”œâ”€â”€ route.ts    # GET: ìº íŽ˜ì¸ ìƒì„¸, PATCH: ìº íŽ˜ì¸ ìˆ˜ì •
    â”‚       â”œâ”€â”€ approve/route.ts # POST: ìº íŽ˜ì¸ ìŠ¹ì¸
    â”‚       â”œâ”€â”€ applications/
    â”‚       â”‚   â”œâ”€â”€ route.ts # GET: ì§€ì› ëª©ë¡, POST: ì§€ì›í•˜ê¸°
    â”‚       â”‚   â””â”€â”€ [appId]/select/route.ts # POST: ì¸í”Œë£¨ì–¸ì„œ ì„ ì •
    â”‚       â””â”€â”€ submissions/
    â”‚           â”œâ”€â”€ route.ts # GET: ì œì¶œ ëª©ë¡, POST: ì¦ë¹™ ì œì¶œ
    â”‚           â””â”€â”€ [subId]/review/route.ts # POST: ì œì¶œ ê²€í† 
    â”‚
    â”œâ”€â”€ cron/               # ë°±ê·¸ë¼ìš´ë“œ ìž‘ì—… (Vercel Cron)
    â”‚   â”œâ”€â”€ deadline-reminder/route.ts    # ë§¤ì¼ 9ì‹œ: ë§ˆê° ë¦¬ë§ˆì¸ë”
    â”‚   â”œâ”€â”€ overdue-detection/route.ts    # ë§¤ì¼ 9ì‹œ 5ë¶„: ì§€ì—° ê°ì§€
    â”‚   â”œâ”€â”€ generate-reports/route.ts      # ë§¤ì¼ 18ì‹œ: ë¦¬í¬íŠ¸ ìƒì„±
    â”‚   â””â”€â”€ status-transition/route.ts     # ë§¤ì‹œê°„: ìƒíƒœ ìžë™ ì „í™˜
    â”‚
    â””â”€â”€ storage/
        â””â”€â”€ upload/route.ts # POST: íŒŒì¼ ì—…ë¡œë“œ Signed URL ìƒì„±
```

**Route Groups ì„¤ëª…**:
- `(auth)`, `(advertiser)`, `(influencer)`: Next.js Route Groupsë¡œ URLì—ëŠ” í¬í•¨ë˜ì§€ ì•Šì§€ë§Œ ë ˆì´ì•„ì›ƒì„ ë¶„ë¦¬
- `admin/`: Route Groupì´ ì•„ë‹ˆë¯€ë¡œ `/admin/*` URLë¡œ ì ‘ê·¼

**API Routes íŒ¨í„´**:
- RESTful êµ¬ì¡°: `/api/campaigns/{id}/applications/{appId}/select`
- ëª¨ë“  APIëŠ” ì¸ì¦ ë¯¸ë“¤ì›¨ì–´ë¥¼ í†µí•´ í† í° ê²€ì¦
- ì—­í•  ê¸°ë°˜ ì ‘ê·¼ ì œì–´ (`requireRole` ë¯¸ë“¤ì›¨ì–´)

---

#### `/src/components` - React ì»´í¬ë„ŒíŠ¸

**ì±…ìž„**: ìž¬ì‚¬ìš© ê°€ëŠ¥í•œ UI ì»´í¬ë„ŒíŠ¸ ì œê³µ

**êµ¬ì¡°**:
```
src/components/
â”œâ”€â”€ ui/                     # shadcn/ui ê¸°ë°˜ ê¸°ë³¸ UI ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ button.tsx          # ë²„íŠ¼ ì»´í¬ë„ŒíŠ¸ (variant, size ì§€ì›)
â”‚   â”œâ”€â”€ card.tsx            # ì¹´ë“œ ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ input.tsx           # ìž…ë ¥ í•„ë“œ
â”‚   â”œâ”€â”€ textarea.tsx        # í…ìŠ¤íŠ¸ ì˜ì—­
â”‚   â””â”€â”€ badge.tsx           # ë±ƒì§€ ì»´í¬ë„ŒíŠ¸
â”‚
â””â”€â”€ campaigns/
    â””â”€â”€ CampaignsList.tsx   # ìº íŽ˜ì¸ ë¦¬ìŠ¤íŠ¸ ì»´í¬ë„ŒíŠ¸ (ì—­í• ë³„ ë‹¤ë¥¸ ë·°)
```

**íŠ¹ì§•**:
- `ui/`: Radix UI ê¸°ë°˜ ì ‘ê·¼ì„± ìžˆëŠ” ì»´í¬ë„ŒíŠ¸
- `campaigns/`: ë„ë©”ì¸ë³„ ë¹„ì¦ˆë‹ˆìŠ¤ ì»´í¬ë„ŒíŠ¸
- í˜„ìž¬ ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°ê°€ ë‹¨ìˆœí•¨ (í™•ìž¥ í•„ìš” ì‹œ ë„ë©”ì¸ë³„ í´ë” ë¶„ë¦¬ ê¶Œìž¥)

---

#### `/src/lib` - ê³µí†µ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë° ìœ í‹¸ë¦¬í‹°

**ì±…ìž„**: ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§, ì™¸ë¶€ ì„œë¹„ìŠ¤ ì—°ë™, ê³µí†µ ê¸°ëŠ¥ ì œê³µ

**êµ¬ì¡°**:
```
src/lib/
â”œâ”€â”€ firebase/
â”‚   â”œâ”€â”€ admin.ts            # Firebase Admin SDK ì´ˆê¸°í™” ë° ì‹±ê¸€í†¤
â”‚   â”‚                        # - getAdminApp(): Firebase App ì¸ìŠ¤í„´ìŠ¤
â”‚   â”‚                        # - getAdminFirestore(): Firestore ì¸ìŠ¤í„´ìŠ¤
â”‚   â”‚                        # - getAdminAuth(): Auth ì¸ìŠ¤í„´ìŠ¤
â”‚   â”‚                        # - getAdminStorage(): Storage ì¸ìŠ¤í„´ìŠ¤
â”‚   â”‚
â”‚   â”œâ”€â”€ auth.ts             # í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ Firebase Auth
â”‚   â”‚                        # - getFirebaseAuth(): í´ë¼ì´ì–¸íŠ¸ Auth ì¸ìŠ¤í„´ìŠ¤
â”‚   â”‚
â”‚   â””â”€â”€ firestore.ts        # Firestore í—¬í¼ í•¨ìˆ˜
â”‚                            # - createCampaign(): ìº íŽ˜ì¸ ë¬¸ì„œ ìƒì„±
â”‚                            # - createCampaignSpec(): ìŠ¤íŽ™ ë²„ì „ ìƒì„±
â”‚                            # - updateCampaign(): ìº íŽ˜ì¸ ì—…ë°ì´íŠ¸
â”‚                            # - createEvent(): ì´ë²¤íŠ¸ ê¸°ë¡
â”‚
â”œâ”€â”€ auth/
â”‚   â”œâ”€â”€ middleware.ts       # API ì¸ì¦/ì¸ê°€ ë¯¸ë“¤ì›¨ì–´
â”‚   â”‚                        # - verifyAuth(): Firebase í† í° ê²€ì¦
â”‚   â”‚                        # - requireRole(): ì—­í•  ê¸°ë°˜ ì ‘ê·¼ ì œì–´
â”‚   â”‚                        # - verifyCronSecret(): Cron ìž‘ì—… ì¸ì¦
â”‚   â”‚
â”‚   â””â”€â”€ roles.ts            # ì—­í•  íƒ€ìž… ì •ì˜ ë° ìƒìˆ˜
â”‚
â”œâ”€â”€ llm/
â”‚   â”œâ”€â”€ client.ts           # LLM API í´ë¼ì´ì–¸íŠ¸ (OpenAI)
â”‚   â”‚                        # - generateCampaignSpec(): ìžì—°ì–´ â†’ ìº íŽ˜ì¸ ìŠ¤íŽ™
â”‚   â”‚                        # - ìž¬ì‹œë„ ë¡œì§ í¬í•¨ (ìµœëŒ€ 3íšŒ)
â”‚   â”‚
â”‚   â”œâ”€â”€ prompts.ts          # LLM í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿
â”‚   â”‚                        # - SYSTEM_PROMPT: ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸
â”‚   â”‚                        # - getUserPrompt(): ì‚¬ìš©ìž ìž…ë ¥ í”„ë¡¬í”„íŠ¸
â”‚   â”‚                        # - getRetryPrompt(): ìž¬ì‹œë„ í”„ë¡¬í”„íŠ¸
â”‚   â”‚
â”‚   â””â”€â”€ schema.ts           # Zod ìŠ¤í‚¤ë§ˆ (LLM ì‘ë‹µ ê²€ì¦)
â”‚                            # - LLMResponseSchema: JSON ì‘ë‹µ ìŠ¤í‚¤ë§ˆ
â”‚
â””â”€â”€ utils/
    â”œâ”€â”€ cn.ts               # className ìœ í‹¸ë¦¬í‹° (Tailwind merge)
    â””â”€â”€ constants.ts        # ìƒìˆ˜ ì •ì˜
                            # - CAMPAIGN_STATUS_LABELS: ìƒíƒœ ë¼ë²¨
                            # - APPLICATION_STATUS_LABELS
                            # - SUBMISSION_STATUS_LABELS
```

**í•µì‹¬ íŒŒì¼ ìƒì„¸**:

**`lib/firebase/admin.ts`**:
- Firebase Admin SDK ì‹±ê¸€í†¤ íŒ¨í„´ìœ¼ë¡œ ì´ˆê¸°í™”
- í™˜ê²½ë³€ìˆ˜ì—ì„œ ì„œë¹„ìŠ¤ ê³„ì • í‚¤ ì½ê¸°
- ëª¨ë“  ì„œë²„ ì‚¬ì´ë“œ Firebase ìž‘ì—…ì˜ ì§„ìž…ì 

**`lib/auth/middleware.ts`**:
- ëª¨ë“  API Routeì˜ ì²« ë²ˆì§¸ ì§„ìž…ì 
- Authorization í—¤ë”ì—ì„œ Bearer í† í° ì¶”ì¶œ
- Firebase Admin Authë¡œ í† í° ê²€ì¦
- Firestore users ì»¬ë ‰ì…˜ì—ì„œ ì—­í•  ì •ë³´ ì¡°íšŒ
- ì—­í•  ê¸°ë°˜ ì ‘ê·¼ ì œì–´ (`requireRole`)

**`lib/llm/client.ts`**:
- OpenAI GPT-4 Turbo ì‚¬ìš©
- JSON ëª¨ë“œë¡œ ì‘ë‹µ ë°›ê¸°
- Zod ìŠ¤í‚¤ë§ˆë¡œ ì‘ë‹µ ê²€ì¦
- ì‹¤íŒ¨ ì‹œ ìµœëŒ€ 3íšŒ ìž¬ì‹œë„ (ì—ëŸ¬ ë©”ì‹œì§€ í¬í•¨)

---

#### `/src/types` - TypeScript íƒ€ìž… ì •ì˜

**ì±…ìž„**: ë„ë©”ì¸ ëª¨ë¸ ë° íƒ€ìž… ì •ì˜ ì¤‘ì•™í™”

**êµ¬ì¡°**:
```
src/types/
â”œâ”€â”€ index.ts                # íƒ€ìž… ìž¬export (UserRole ë“±)
â”œâ”€â”€ user.ts                 # ì‚¬ìš©ìž íƒ€ìž…
â”œâ”€â”€ campaign.ts             # ìº íŽ˜ì¸ ê´€ë ¨ íƒ€ìž…
â”‚                            # - CampaignStatus: ìƒíƒœ enum
â”‚                            # - Campaign: ìº íŽ˜ì¸ ì—”í‹°í‹°
â”‚                            # - CampaignSpec: LLM ìƒì„± ìŠ¤íŽ™
â”‚                            # - CampaignSpecVersion: ìŠ¤íŽ™ ë²„ì „ ê´€ë¦¬
â”‚
â”œâ”€â”€ application.ts          # ì§€ì› ê´€ë ¨ íƒ€ìž…
â”œâ”€â”€ submission.ts           # ì œì¶œ ê´€ë ¨ íƒ€ìž…
â””â”€â”€ ...
```

**íŠ¹ì§•**:
- Firestore ë¬¸ì„œ íƒ€ìž…ê³¼ í´ë¼ì´ì–¸íŠ¸ íƒ€ìž… ë¶„ë¦¬ (`CampaignDocument` vs `Campaign`)
- Timestamp ë³€í™˜ ë¡œì§ì€ API ë ˆì´ì–´ì—ì„œ ì²˜ë¦¬

---

### 2.3 `/public` - ì •ì  íŒŒì¼

```
public/
â””â”€â”€ images/
    â”œâ”€â”€ hero.jpg            # ëžœë”© íŽ˜ì´ì§€ ížˆì–´ë¡œ ì´ë¯¸ì§€
    â”œâ”€â”€ platform.jpg        # í”Œëž«í¼ ì†Œê°œ ì„¹ì…˜ ì´ë¯¸ì§€
    â””â”€â”€ cta.jpg             # CTA ì„¹ì…˜ ì´ë¯¸ì§€
```

**ì ‘ê·¼ ë°©ë²•**: `/images/hero.jpg` (Next.jsê°€ ìžë™ìœ¼ë¡œ `/public`ì„ ë£¨íŠ¸ë¡œ ë§¤í•‘)

---

### 2.4 `/docs` - í”„ë¡œì íŠ¸ ë¬¸ì„œ

```
docs/
â”œâ”€â”€ ARCHITECTURE.md         # ì•„í‚¤í…ì²˜ ì„¤ê³„ ë¬¸ì„œ
â”œâ”€â”€ FOLDER_STRUCTURE.md     # í´ë” êµ¬ì¡° ìƒì„¸
â”œâ”€â”€ FIRESTORE_SCHEMA.md     # Firestore ìŠ¤í‚¤ë§ˆ
â”œâ”€â”€ API_SPEC.md             # API ëª…ì„¸ì„œ
â”œâ”€â”€ LLM_PROMPT_DESIGN.md    # LLM í”„ë¡¬í”„íŠ¸ ì„¤ê³„
â”œâ”€â”€ BACKGROUND_JOBS.md      # ë°±ê·¸ë¼ìš´ë“œ ìž‘ì—… ì„¤ê³„
â”œâ”€â”€ AUTH_FLOW.md            # ì¸ì¦ í”Œë¡œìš°
â””â”€â”€ PROJECT_PROGRESS.md     # í”„ë¡œì íŠ¸ ì§„í–‰ ìƒí™©
```

---

## 3. í•µì‹¬ íë¦„ ì„¤ëª…

### 3.1 ìº íŽ˜ì¸ ìƒì„± í”Œë¡œìš° (ìžì—°ì–´ â†’ AI ê¸°íšì„œ)

```
1. ì‚¬ìš©ìž ì•¡ì…˜
   â””â”€> (advertiser)/campaigns/new/page.tsx
       â””â”€> ì‚¬ìš©ìžê°€ ìžì—°ì–´ ìž…ë ¥ í›„ "ìƒì„±" ë²„íŠ¼ í´ë¦­

2. API í˜¸ì¶œ
   â””â”€> POST /api/campaigns/generate
       â””â”€> Body: { naturalLanguageInput: "..." }

3. ì¸ì¦/ì¸ê°€
   â””â”€> lib/auth/middleware.ts::requireRole(['advertiser'])
       â””â”€> Authorization í—¤ë”ì—ì„œ í† í° ì¶”ì¶œ
       â””â”€> Firebase Admin Authë¡œ í† í° ê²€ì¦
       â””â”€> Firestore users/{uid}ì—ì„œ role í™•ì¸
       â””â”€> roleì´ 'advertiser'ì¸ì§€ ê²€ì¦

4. LLM í˜¸ì¶œ
   â””â”€> lib/llm/client.ts::generateCampaignSpec()
       â””â”€> lib/llm/prompts.ts::getUserPrompt()ë¡œ í”„ë¡¬í”„íŠ¸ ìƒì„±
       â””â”€> OpenAI GPT-4 Turbo API í˜¸ì¶œ
       â””â”€> JSON ì‘ë‹µ íŒŒì‹±
       â””â”€> lib/llm/schema.ts::LLMResponseSchemaë¡œ ê²€ì¦
       â””â”€> ì‹¤íŒ¨ ì‹œ ìµœëŒ€ 3íšŒ ìž¬ì‹œë„

5. ë°ì´í„° ì €ìž¥
   â””â”€> lib/firebase/firestore.ts::createCampaign()
       â””â”€> Firestore campaigns/{id} ìƒì„± (status: 'GENERATED')
   â””â”€> lib/firebase/firestore.ts::createCampaignSpec()
       â””â”€> Firestore campaigns/{id}/specs/{versionId} ìƒì„±
   â””â”€> lib/firebase/firestore.ts::updateCampaign()
       â””â”€> ì œëª©, ë§ˆê°ì¼ ë“± ì—…ë°ì´íŠ¸
   â””â”€> lib/firebase/firestore.ts::createEvent()
       â””â”€> events/{eventId} ìƒì„± (audit trail)

6. ì‘ë‹µ ë°˜í™˜
   â””â”€> { success: true, data: { campaignId, proposalMarkdown, spec, status } }

7. í”„ë¡ íŠ¸ì—”ë“œ ì²˜ë¦¬
   â””â”€> ì œì•ˆì„œ ë§ˆí¬ë‹¤ìš´ ë Œë”ë§
   â””â”€> í™•ì¸ ì§ˆë¬¸ í‘œì‹œ
   â””â”€> ìŠ¹ì¸/ìˆ˜ì • ì˜µì…˜ ì œê³µ
```

**ì£¼ìš” í¬ì¸íŠ¸**:
- LLM ì‘ë‹µì€ Zod ìŠ¤í‚¤ë§ˆë¡œ ê²€ì¦í•˜ì—¬ íƒ€ìž… ì•ˆì •ì„± ë³´ìž¥
- ìŠ¤íŽ™ ë²„ì „ ê´€ë¦¬ë¡œ ì´ë ¥ ì¶”ì  ê°€ëŠ¥
- ëª¨ë“  ìƒíƒœ ë³€ê²½ì€ events ì»¬ë ‰ì…˜ì— ê¸°ë¡ (audit trail)

---

### 3.2 ì¸í”Œë£¨ì–¸ì„œ ì§€ì› í”Œë¡œìš°

```
1. ì¸í”Œë£¨ì–¸ì„œ ì•¡ì…˜
   â””â”€> campaigns/page.tsx (CampaignsList ì»´í¬ë„ŒíŠ¸)
       â””â”€> "ì˜¤í”ˆ ìº íŽ˜ì¸" ëª©ë¡ ì¡°íšŒ

2. API í˜¸ì¶œ
   â””â”€> GET /api/campaigns/open
       â””â”€> Authorization: Bearer {token}

3. ì¸ì¦/ì¸ê°€
   â””â”€> lib/auth/middleware.ts::requireRole(['influencer'])
       â””â”€> roleì´ 'influencer'ì¸ì§€ ê²€ì¦

4. ë°ì´í„° ì¡°íšŒ
   â””â”€> Firestore campaigns ì»¬ë ‰ì…˜ ì¿¼ë¦¬
       â””â”€> where('status', '==', 'OPEN')
       â””â”€> where('openedAt', '<=', now())
       â””â”€> orderBy('openedAt', 'desc')

5. ì§€ì›í•˜ê¸°
   â””â”€> POST /api/campaigns/{id}/applications
       â””â”€> Body: { message: "..." }
       â””â”€> Firestore campaigns/{id}/applications/{appId} ìƒì„±
       â””â”€> status: 'APPLIED'

6. ê´‘ê³ ì£¼ ì„ ì •
   â””â”€> POST /api/campaigns/{id}/applications/{appId}/select
       â””â”€> requireRole(['advertiser'])
       â””â”€> application.status = 'SELECTED'
       â””â”€> campaign.selectedInfluencerIdsì— ì¶”ê°€
       â””â”€> campaign.status = 'MATCHING' â†’ 'RUNNING'
```

---

### 3.3 ë°±ê·¸ë¼ìš´ë“œ ìž‘ì—… í”Œë¡œìš° (Cron Jobs)

```
1. Vercel Cron íŠ¸ë¦¬ê±°
   â””â”€> vercel.jsonì— ì •ì˜ëœ ìŠ¤ì¼€ì¤„ì— ë”°ë¼ ìžë™ í˜¸ì¶œ
       â””â”€> ì˜ˆ: "0 9 * * *" (ë§¤ì¼ 9ì‹œ UTC)

2. Cron ì¸ì¦
   â””â”€> lib/auth/middleware.ts::verifyCronSecret()
       â””â”€> x-cron-secret í—¤ë”ì™€ CRON_SECRET í™˜ê²½ë³€ìˆ˜ ë¹„êµ

3. ìž‘ì—… ì‹¤í–‰
   â””â”€> /api/cron/deadline-reminder/route.ts
       â””â”€> Firestore campaigns ì¿¼ë¦¬
       â””â”€> where('deadlineDate', '<=', tomorrow)
       â””â”€> where('status', 'in', ['OPEN', 'MATCHING', 'RUNNING'])
       â””â”€> ê° ìº íŽ˜ì¸ì— ëŒ€í•´ ì•Œë¦¼ ìƒì„± ë˜ëŠ” ì´ë©”ì¼ ë°œì†¡

4. ìƒíƒœ ì „í™˜
   â””â”€> /api/cron/status-transition/route.ts
       â””â”€> ë§¤ì‹œê°„ ì‹¤í–‰
       â””â”€> ì¡°ê±´ì— ë”°ë¼ ìžë™ ìƒíƒœ ì „í™˜
           â””â”€> APPROVED + openedAt <= now() â†’ OPEN
           â””â”€> RUNNING + deadlineDate < now() â†’ COMPLETED
```

---

## 4. ê¸°ìˆ  ìŠ¤íƒ ë° ì˜ì¡´ì„± ìš”ì•½

### 4.1 í”„ë¡ íŠ¸ì—”ë“œ

| ê¸°ìˆ  | ë²„ì „ | ìš©ë„ |
|------|------|------|
| Next.js | 14.0.4 | React í”„ë ˆìž„ì›Œí¬ (App Router) |
| React | 18.2.0 | UI ë¼ì´ë¸ŒëŸ¬ë¦¬ |
| TypeScript | 5.3.3 | íƒ€ìž… ì•ˆì •ì„± |
| Tailwind CSS | 3.3.6 | ìœ í‹¸ë¦¬í‹° ê¸°ë°˜ CSS |
| Radix UI | ^1.0.x | ì ‘ê·¼ì„± ìžˆëŠ” UI ì»´í¬ë„ŒíŠ¸ |
| Lucide React | ^0.294.0 | ì•„ì´ì½˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ |

### 4.2 ë°±ì—”ë“œ

| ê¸°ìˆ  | ë²„ì „ | ìš©ë„ |
|------|------|------|
| Next.js API Routes | 14.0.4 | ì„œë²„ ì‚¬ì´ë“œ API ì—”ë“œí¬ì¸íŠ¸ |
| Firebase Admin SDK | 12.0.0 | ì„œë²„ ì‚¬ì´ë“œ Firebase ì—°ë™ |
| Firebase Client SDK | 10.7.1 | í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ Firebase ì—°ë™ |

### 4.3 ë°ì´í„° ê³„ì¸µ

| ì„œë¹„ìŠ¤ | ìš©ë„ |
|--------|------|
| Firebase Firestore | êµ¬ì¡°í™”ëœ ë°ì´í„° ì €ìž¥ (NoSQL) |
| Firebase Storage | íŒŒì¼ ì €ìž¥ (ì¦ë¹™ ì´ë¯¸ì§€ ë“±) |
| Firebase Authentication | ì‚¬ìš©ìž ì¸ì¦ (Email/Password) |

### 4.4 AI/External Services

| ì„œë¹„ìŠ¤ | ìš©ë„ |
|--------|------|
| OpenAI GPT-4 Turbo | ìžì—°ì–´ â†’ êµ¬ì¡°í™”ëœ ìº íŽ˜ì¸ ìŠ¤íŽ™ ë³€í™˜ |
| Vercel Cron | ìŠ¤ì¼€ì¤„ë§ëœ ë°±ê·¸ë¼ìš´ë“œ ìž‘ì—… |

### 4.5 ê°œë°œ ë„êµ¬

| ë„êµ¬ | ìš©ë„ |
|------|------|
| ESLint | ì½”ë“œ í’ˆì§ˆ ê²€ì‚¬ |
| TypeScript | íƒ€ìž… ì²´í¬ (`tsc --noEmit`) |
| Zod | ëŸ°íƒ€ìž„ ìŠ¤í‚¤ë§ˆ ê²€ì¦ (LLM ì‘ë‹µ) |

### 4.6 ë°°í¬/ì¸í”„ë¼

| ì„œë¹„ìŠ¤ | ìš©ë„ |
|--------|------|
| Vercel | í”„ë¡ íŠ¸ì—”ë“œ/API ë°°í¬, Cron Jobs |
| Firebase | ë°ì´í„°ë² ì´ìŠ¤, ìŠ¤í† ë¦¬ì§€, ì¸ì¦ |

---

## 5. í˜„ìž¬ êµ¬ì¡°ì˜ íŠ¹ì§•

### 5.1 ìž˜ ë¶„ë¦¬ëœ ë¶€ë¶„

âœ… **ì¸ì¦/ì¸ê°€ ë ˆì´ì–´**
- `lib/auth/middleware.ts`ì—ì„œ ì¤‘ì•™í™”ëœ ì¸ì¦ ë¡œì§
- ì—­í•  ê¸°ë°˜ ì ‘ê·¼ ì œì–´ê°€ ì¼ê´€ë˜ê²Œ ì ìš©
- API Routeì—ì„œ ìž¬ì‚¬ìš© ê°€ëŠ¥í•œ ë¯¸ë“¤ì›¨ì–´ íŒ¨í„´

âœ… **Firebase ì—°ë™**
- `lib/firebase/`ì—ì„œ ëª¨ë“  Firebase ê´€ë ¨ ë¡œì§ ë¶„ë¦¬
- Admin/Client SDK ë¶„ë¦¬
- ì‹±ê¸€í†¤ íŒ¨í„´ìœ¼ë¡œ ì¸ìŠ¤í„´ìŠ¤ ê´€ë¦¬

âœ… **LLM í†µí•©**
- `lib/llm/`ì—ì„œ LLM ê´€ë ¨ ë¡œì§ ë¶„ë¦¬
- í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿ ë¶„ë¦¬ (`prompts.ts`)
- ìŠ¤í‚¤ë§ˆ ê²€ì¦ ë¶„ë¦¬ (`schema.ts`)

âœ… **íƒ€ìž… ì •ì˜**
- `types/`ì—ì„œ ë„ë©”ì¸ ëª¨ë¸ ì¤‘ì•™í™”
- Firestore ë¬¸ì„œ íƒ€ìž…ê³¼ í´ë¼ì´ì–¸íŠ¸ íƒ€ìž… ë¶„ë¦¬

âœ… **Route Groups í™œìš©**
- ì—­í• ë³„ UIë¥¼ Route Groupsë¡œ ë¶„ë¦¬
- ë ˆì´ì•„ì›ƒ ì¤‘ë³µ ì œê±°

---

### 5.2 ê²°í•©ë„ê°€ ë†’ì€ ë¶€ë¶„ (ì£¼ì˜ í•„ìš”)

âš ï¸ **API Routeì™€ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ê²°í•©**
- í˜„ìž¬ API Route Handlerì— ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì´ ì§ì ‘ í¬í•¨
- ì˜ˆ: `/api/campaigns/generate/route.ts`ì—ì„œ LLM í˜¸ì¶œ, Firestore ì €ìž¥ì„ ëª¨ë‘ ì²˜ë¦¬
- **ê°œì„  ë°©í–¥**: Service ë ˆì´ì–´ ë„ìž… ê³ ë ¤
  ```
  src/lib/services/
  â”œâ”€â”€ campaign.service.ts    # ìº íŽ˜ì¸ ìƒì„±, ì—…ë°ì´íŠ¸ ë¡œì§
  â”œâ”€â”€ application.service.ts # ì§€ì› ì²˜ë¦¬ ë¡œì§
  â””â”€â”€ submission.service.ts  # ì œì¶œ ì²˜ë¦¬ ë¡œì§
  ```

âš ï¸ **Firestore ì¿¼ë¦¬ ë¡œì§ ë¶„ì‚°**
- ê° API Routeì—ì„œ Firestore ì¿¼ë¦¬ë¥¼ ì§ì ‘ ìž‘ì„±
- **ê°œì„  ë°©í–¥**: Repository íŒ¨í„´ ë„ìž… ê³ ë ¤
  ```
  src/lib/repositories/
  â”œâ”€â”€ campaign.repository.ts
  â”œâ”€â”€ application.repository.ts
  â””â”€â”€ submission.repository.ts
  ```

âš ï¸ **ì—ëŸ¬ ì²˜ë¦¬ ì¼ê´€ì„±**
- API Routeë§ˆë‹¤ ì—ëŸ¬ ì‘ë‹µ í˜•ì‹ì´ ì•½ê°„ì”© ë‹¤ë¥¼ ìˆ˜ ìžˆìŒ
- **ê°œì„  ë°©í–¥**: ê³µí†µ ì—ëŸ¬ í•¸ë“¤ëŸ¬ ìœ í‹¸ë¦¬í‹°

---

### 5.3 í™•ìž¥/ë¦¬íŒ©í† ë§ ì‹œ ì£¼ì˜ì‚¬í•­

ðŸ”´ **Firestore ë³´ì•ˆ ê·œì¹™ ë¯¸êµ¬í˜„**
- `firestore.rules`ê°€ í˜„ìž¬ ëª¨ë“  ì ‘ê·¼ì„ ì°¨ë‹¨
- **ì¦‰ì‹œ ìˆ˜ì • í•„ìš”**: í”„ë¡œë•ì…˜ ë°°í¬ ì „ ë³´ì•ˆ ê·œì¹™ êµ¬í˜„ í•„ìˆ˜

ðŸŸ¡ **ìƒíƒœ ê´€ë¦¬**
- í˜„ìž¬ í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ ìƒíƒœ ê´€ë¦¬ëŠ” React hooksë§Œ ì‚¬ìš©
- ë³µìž¡í•œ ìƒíƒœê°€ ëŠ˜ì–´ë‚˜ë©´ Context API ë˜ëŠ” ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ ê³ ë ¤

ðŸŸ¡ **ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°**
- í˜„ìž¬ `components/` êµ¬ì¡°ê°€ ë‹¨ìˆœí•¨
- ë„ë©”ì¸ì´ ëŠ˜ì–´ë‚˜ë©´ ë„ë©”ì¸ë³„ í´ë” ë¶„ë¦¬ ê¶Œìž¥
  ```
  components/
  â”œâ”€â”€ ui/              # ê¸°ë³¸ UI ì»´í¬ë„ŒíŠ¸
  â”œâ”€â”€ campaigns/       # ìº íŽ˜ì¸ ê´€ë ¨ ì»´í¬ë„ŒíŠ¸
  â”œâ”€â”€ applications/    # ì§€ì› ê´€ë ¨ ì»´í¬ë„ŒíŠ¸
  â””â”€â”€ shared/          # ê³µí†µ ì»´í¬ë„ŒíŠ¸
  ```

ðŸŸ¡ **í…ŒìŠ¤íŠ¸**
- í˜„ìž¬ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì—†ìŒ
- API Route, LLM í†µí•©, Firestore ì¿¼ë¦¬ ë“±ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ ì¶”ê°€ ê¶Œìž¥

ðŸŸ¡ **í™˜ê²½ë³€ìˆ˜ ê´€ë¦¬**
- `.env.local` íŒŒì¼ì´ Gitì— ì˜¬ë¼ê°€ì§€ ì•Šì§€ë§Œ
- `.env.example` íŒŒì¼ì´ ì—†ì–´ì„œ í•„ìš”í•œ í™˜ê²½ë³€ìˆ˜ë¥¼ íŒŒì•…í•˜ê¸° ì–´ë ¤ì›€
- **ê°œì„ **: `.env.example` íŒŒì¼ ì¶”ê°€ ê¶Œìž¥

---

## 6. ë°ì´í„° ëª¨ë¸ ìš”ì•½

### 6.1 Firestore ì»¬ë ‰ì…˜ êµ¬ì¡°

```
users/{uid}
  - email: string
  - role: 'advertiser' | 'influencer' | 'admin'
  - createdAt: Timestamp
  - updatedAt: Timestamp

campaigns/{campaignId}
  - advertiserId: string
  - status: CampaignStatus
  - title: string
  - naturalLanguageInput?: string
  - createdAt: Timestamp
  - updatedAt: Timestamp
  - approvedAt?: Timestamp
  - openedAt?: Timestamp
  - completedAt?: Timestamp
  - deadlineDate?: Timestamp
  - estimatedDuration?: number
  - currentSpecVersionId?: string
  - selectedInfluencerIds?: string[]

campaigns/{campaignId}/specs/{specVersionId}
  - version: number
  - proposalMarkdown: string
  - specJson: CampaignSpec (êµ¬ì¡°í™”ëœ ìŠ¤íŽ™)
  - createdAt: Timestamp
  - createdBy: string

campaigns/{campaignId}/applications/{applicationId}
  - influencerId: string
  - status: 'APPLIED' | 'REJECTED' | 'SELECTED'
  - message?: string
  - createdAt: Timestamp

campaigns/{campaignId}/submissions/{submissionId}
  - influencerId: string
  - applicationId: string
  - status: 'SUBMITTED' | 'NEEDS_FIX' | 'APPROVED'
  - contentUrl?: string
  - screenshotUrls?: string[]
  - metrics?: object
  - createdAt: Timestamp

events/{eventId}
  - campaignId: string
  - actorId: string
  - actorRole: string
  - type: string
  - payload?: object
  - createdAt: Timestamp
```

---

## 7. ë³´ì•ˆ ê³ ë ¤ì‚¬í•­

### 7.1 í˜„ìž¬ êµ¬í˜„ëœ ë³´ì•ˆ

âœ… **ì¸ì¦**
- ëª¨ë“  API Routeì—ì„œ Firebase í† í° ê²€ì¦
- ì„œë²„ ì‚¬ì´ë“œì—ì„œë§Œ í† í° ê²€ì¦ (í´ë¼ì´ì–¸íŠ¸ ê²€ì¦ ì˜ì¡´ ì•ˆ í•¨)

âœ… **ì¸ê°€**
- ì—­í•  ê¸°ë°˜ ì ‘ê·¼ ì œì–´ (`requireRole` ë¯¸ë“¤ì›¨ì–´)
- ì‚¬ìš©ìžëŠ” ìžì‹ ì˜ ë°ì´í„° ë˜ëŠ” í—ˆê°€ëœ ë°ì´í„°ë§Œ ì ‘ê·¼

âœ… **í™˜ê²½ë³€ìˆ˜**
- ë¯¼ê°í•œ ì •ë³´ (Firebase ì„œë¹„ìŠ¤ ê³„ì • í‚¤, OpenAI API í‚¤)ëŠ” í™˜ê²½ë³€ìˆ˜ë¡œ ê´€ë¦¬
- `.gitignore`ì— í¬í•¨

### 7.2 ë³´ì•ˆ ê°œì„  í•„ìš” ì‚¬í•­

ðŸ”´ **Firestore ë³´ì•ˆ ê·œì¹™**
- í˜„ìž¬ ëª¨ë“  ì ‘ê·¼ ì°¨ë‹¨ ìƒíƒœ
- **ì¦‰ì‹œ êµ¬í˜„ í•„ìš”**: ì—­í• ë³„ ì½ê¸°/ì“°ê¸° ê·œì¹™ ì •ì˜

ðŸŸ¡ **API Rate Limiting**
- í˜„ìž¬ LLM API í˜¸ì¶œì— ëŒ€í•œ Rate Limiting ì—†ìŒ
- ë¹„ìš© ë° ì•…ìš© ë°©ì§€ë¥¼ ìœ„í•´ Rate Limiting ì¶”ê°€ ê¶Œìž¥

ðŸŸ¡ **ìž…ë ¥ ê²€ì¦**
- ì¼ë¶€ APIì—ì„œ ìž…ë ¥ ê²€ì¦ì´ ë¶€ì¡±í•  ìˆ˜ ìžˆìŒ
- Zod ìŠ¤í‚¤ë§ˆë¡œ ëª¨ë“  ìž…ë ¥ ê²€ì¦ ê°•í™” ê¶Œìž¥

---

## 8. ë°°í¬ ë° ìš´ì˜

### 8.1 ë°°í¬ í™˜ê²½

- **í”„ë¡ íŠ¸ì—”ë“œ/API**: Vercel
- **ë°ì´í„°ë² ì´ìŠ¤**: Firebase Firestore
- **ìŠ¤í† ë¦¬ì§€**: Firebase Storage
- **ì¸ì¦**: Firebase Authentication

### 8.2 í™˜ê²½ë³€ìˆ˜

í•„ìˆ˜ í™˜ê²½ë³€ìˆ˜ ëª©ë¡:
- `NEXT_PUBLIC_FIREBASE_*`: í´ë¼ì´ì–¸íŠ¸ Firebase ì„¤ì •
- `FIREBASE_ADMIN_*`: ì„œë²„ ì‚¬ì´ë“œ Firebase Admin ì„¤ì •
- `OPENAI_API_KEY`: OpenAI API í‚¤
- `CRON_SECRET`: Cron ìž‘ì—… ì¸ì¦ ì‹œí¬ë¦¿
- `NEXT_PUBLIC_APP_URL`: ì•± URL

### 8.3 Cron Jobs

Vercel Cronìœ¼ë¡œ ìŠ¤ì¼€ì¤„ë§ëœ ìž‘ì—…:
- `deadline-reminder`: ë§¤ì¼ 9ì‹œ UTC - ë§ˆê° ë¦¬ë§ˆì¸ë”
- `overdue-detection`: ë§¤ì¼ 9ì‹œ 5ë¶„ UTC - ì§€ì—° ê°ì§€
- `generate-reports`: ë§¤ì¼ 18ì‹œ UTC - ë¦¬í¬íŠ¸ ìƒì„±
- `status-transition`: ë§¤ì‹œê°„ - ìƒíƒœ ìžë™ ì „í™˜

---

## 9. ê°œë°œ ì›Œí¬í”Œë¡œìš°

### 9.1 ë¡œì»¬ ê°œë°œ

```bash
# ì˜ì¡´ì„± ì„¤ì¹˜
npm install

# í™˜ê²½ë³€ìˆ˜ ì„¤ì •
cp .env.example .env.local  # (í˜„ìž¬ .env.example ì—†ìŒ - ìƒì„± í•„ìš”)

# ê°œë°œ ì„œë²„ ì‹¤í–‰
npm run dev

# íƒ€ìž… ì²´í¬
npm run type-check

# ë¦°íŠ¸
npm run lint
```

### 9.2 ë¸Œëžœì¹˜ ì „ëžµ

- `main`: í”„ë¡œë•ì…˜ ë¸Œëžœì¹˜
- `develop`: ê°œë°œ ë¸Œëžœì¹˜
- `features/*`: ê¸°ëŠ¥ ê°œë°œ ë¸Œëžœì¹˜

---

## 10. í–¥í›„ ê°œì„  ì œì•ˆ

### 10.1 ë‹¨ê¸° (ì¦‰ì‹œ í•„ìš”)

1. **Firestore ë³´ì•ˆ ê·œì¹™ êµ¬í˜„** (ìµœìš°ì„ )
2. **`.env.example` íŒŒì¼ ìƒì„±**
3. **ì—ëŸ¬ ì²˜ë¦¬ í‘œì¤€í™”**

### 10.2 ì¤‘ê¸° (3-6ê°œì›”)

1. **Service ë ˆì´ì–´ ë„ìž…** (ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ë¶„ë¦¬)
2. **Repository íŒ¨í„´ ë„ìž…** (ë°ì´í„° ì ‘ê·¼ ë¡œì§ ë¶„ë¦¬)
3. **ì»´í¬ë„ŒíŠ¸ êµ¬ì¡° ê°œì„ ** (ë„ë©”ì¸ë³„ í´ë” ë¶„ë¦¬)
4. **í…ŒìŠ¤íŠ¸ ì½”ë“œ ì¶”ê°€** (API Route, LLM í†µí•© ë“±)

### 10.3 ìž¥ê¸° (6ê°œì›”+)

1. **ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸** (Firestore ì‹¤ì‹œê°„ ë¦¬ìŠ¤ë„ˆ í™œìš©)
2. **ìºì‹± ì „ëžµ** (Next.js ìºì‹±, Redis ë“±)
3. **ëª¨ë‹ˆí„°ë§/ë¡œê¹…** (Sentry, LogRocket ë“±)
4. **ì„±ëŠ¥ ìµœì í™”** (ì´ë¯¸ì§€ ìµœì í™”, ì½”ë“œ ìŠ¤í”Œë¦¬íŒ… ë“±)

---

## ë¶€ë¡: ì£¼ìš” íŒŒì¼ ì°¸ì¡°

### í•µì‹¬ ì§„ìž…ì 

- **ëžœë”© íŽ˜ì´ì§€**: `src/app/page.tsx`
- **ìº íŽ˜ì¸ ë¦¬ìŠ¤íŠ¸**: `src/components/campaigns/CampaignsList.tsx`
- **ìº íŽ˜ì¸ ìƒì„± API**: `src/app/api/campaigns/generate/route.ts`
- **ì¸ì¦ ë¯¸ë“¤ì›¨ì–´**: `src/lib/auth/middleware.ts`
- **LLM í´ë¼ì´ì–¸íŠ¸**: `src/lib/llm/client.ts`
- **Firebase Admin**: `src/lib/firebase/admin.ts`

### ì„¤ì • íŒŒì¼

- **Next.js ì„¤ì •**: `next.config.js`
- **Tailwind ì„¤ì •**: `tailwind.config.ts`
- **TypeScript ì„¤ì •**: `tsconfig.json`
- **Vercel Cron**: `vercel.json`
- **Firestore ê·œì¹™**: `firestore.rules`

---

## ê´€ë ¨ ë¬¸ì„œ

### ê¸°ëŠ¥ êµ¬í˜„ ë¬¸ì„œ
- [í”¼ë“œ ë° ì°œí•˜ê¸° ê¸°ëŠ¥ êµ¬í˜„](./FEED_AND_FAVORITES_IMPLEMENTATION.md) - ë©”ì¸ í”¼ë“œ, ë¬´í•œ ìŠ¤í¬ë¡¤, ì°œí•˜ê¸° ê¸°ëŠ¥ ìƒì„¸ ë¬¸ì„œ

### ê¸°ìˆ  ë¬¸ì„œ
- [Firestore ìŠ¤í‚¤ë§ˆ](./FIRESTORE_SCHEMA.md) - ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¡° ë° ì¿¼ë¦¬ íŒ¨í„´
- [ì¸ì¦ í”Œë¡œìš°](./AUTH_FLOW.md) - ì‚¬ìš©ìž ì¸ì¦ ë° ê¶Œí•œ ê´€ë¦¬
- [ì•„í‚¤í…ì²˜ ë¬¸ì„œ](./ARCHITECTURE.md) - ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ìƒì„¸ ì„¤ëª…

---

**ë¬¸ì„œ ìž‘ì„±ì¼**: 2025-12-26  
**ìž‘ì„±ìž**: ì‹œë‹ˆì–´ ì—”ì§€ë‹ˆì–´/ì•„í‚¤í…íŠ¸  
**ë¬¸ì„œ ë²„ì „**: 1.0  
**ìµœì¢… ì—…ë°ì´íŠ¸**: 2024-12-27

